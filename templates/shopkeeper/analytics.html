{% extends "base.html" %}
{% block content %}

<h2>Analytics Dashboard</h2>

<hr>

<h3>Overview</h3>
<ul>
  <li>Total Orders: {{ total_orders }}</li>
  <li>Delivered Orders: {{ delivered_orders }}</li>
  <li>Pending Orders: {{ pending_orders }}</li>
  <li>Returned Orders: {{ returned_orders }}</li>
</ul>

<h3>Revenue</h3>
<ul>
  <li>Total Revenue: ₹{{ total_revenue }}</li>
  <li>Last 7 Days: ₹{{ revenue_7_days }}</li>
  <li>Last 30 Days: ₹{{ revenue_30_days }}</li>
</ul>

<h3>Top Products</h3>
<table border="1" cellpadding="6">
  <tr>
    <th>Product</th>
    <th>Quantity Sold</th>
    <th>Revenue</th>
  </tr>
  {% for p in top_products %}
  <tr>
    <td>{{ p.variant__product__name }}</td>
    <td>{{ p.sold_qty }}</td>
    <td>₹{{ p.revenue }}</td>
  </tr>
  {% empty %}
  <tr><td colspan="3">No data</td></tr>
  {% endfor %}
</table>

<h3>Top Customers</h3>
<table border="1" cellpadding="6">
  <tr>
    <th>Customer</th>
    <th>Orders</th>
    <th>Total Spent</th>
  </tr>
  {% for c in top_customers %}
  <tr>
    <td>{{ c.user__username }}</td>
    <td>{{ c.orders }}</td>
    <td>₹{{ c.total_spent }}</td>
  </tr>
  {% empty %}
  <tr><td colspan="3">No data</td></tr>
  {% endfor %}
</table>

{% endblock %}
