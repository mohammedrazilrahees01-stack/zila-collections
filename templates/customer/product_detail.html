<h2>{{ product.name }}</h2>

<p>{{ product.description }}</p>
<p><strong>Price:</strong> â‚¹{{ product.price }}</p>

{% if product.variants.exists %}
<form method="post" action="{% url 'cart:add_to_cart_post' %}">
    {% csrf_token %}

    <label><strong>Select Variant:</strong></label><br>
    <select name="variant_id" required>
        {% for variant in product.variants.all %}
            {% if variant.stock > 0 %}
                <option value="{{ variant.id }}">
                    {{ variant.size }} / {{ variant.color }}
                    (Stock: {{ variant.stock }})
                </option>
            {% endif %}
        {% endfor %}
    </select>

    <br><br>

    <label><strong>Quantity:</strong></label><br>
    <input type="number" name="quantity" value="1" min="1">

    <br><br>

    <!-- ADD TO CART -->
    <button type="submit">
        Add to Cart
    </button>
</form>

<br>

<!-- BUY NOW -->
<form method="post" action="{% url 'cart:buy_now' %}">
    {% csrf_token %}
    <input type="hidden" name="variant_id" value="{{ product.variants.first.id }}">
    <input type="hidden" name="quantity" value="1">

    <button type="submit">
        Buy Now
    </button>
</form>

{% else %}
<p>No variants available.</p>
{% endif %}
