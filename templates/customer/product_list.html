{% extends "base.html" %}
{% block content %}

<h2>Products</h2>

<form method="get" style="margin-bottom:20px;">

    <!-- ðŸ” Search -->
    <input type="text" name="q" placeholder="Search products"
           value="{{ request.GET.q }}">

    <!-- ðŸ—‚ Category -->
    <select name="category">
        <option value="">All Categories</option>
        {% for cat in categories %}
            <option value="{{ cat.slug }}"
                {% if request.GET.category == cat.slug %}selected{% endif %}>
                {{ cat.name }}
            </option>
        {% endfor %}
    </select>

    <!-- ðŸ’° Price -->
    <input type="number" name="min_price" placeholder="Min Price"
           value="{{ request.GET.min_price }}">
    <input type="number" name="max_price" placeholder="Max Price"
           value="{{ request.GET.max_price }}">

    <!-- â†• Sort -->
    <select name="sort">
        <option value="">Sort</option>
        <option value="price_low"
            {% if request.GET.sort == "price_low" %}selected{% endif %}>
            Price: Low â†’ High
        </option>
        <option value="price_high"
            {% if request.GET.sort == "price_high" %}selected{% endif %}>
            Price: High â†’ Low
        </option>
    </select>

    <button type="submit">Apply</button>
</form>

<hr>

{% if products %}
    <ul>
        {% for product in products %}
        <li style="margin-bottom:15px;">
            <strong>{{ product.name }}</strong><br>
            â‚¹{{ product.price }}<br>
            <a href="/products/product/{{ product.slug }}/">View Product</a>
        </li>
        {% endfor %}
    </ul>
{% else %}
    <p>No products found.</p>
{% endif %}

{% endblock %}
